<template>
  <div>
    <h1>Vueçš„UI Cube</h1>
    <cube-button inline>Button</cube-button>
    <cube-button @click="showPicker">Picker</cube-button>
    <p></p>
    <div class="scroll-list-wrap">
      <cube-scroll
        ref="scroll"
        :data="items"
        @pulling-down="onPullingDown"
        @pulling-up="onPullingUp"
        :options="{pullDownRefresh:{
          txt:'åŠ è½½æˆåŠŸ'
        },pullUpLoad:true}"
      >
        <div class="list" v-for="(item,index) in items" :key="index">{{item}}</div>

        <!-- <div v-show="!props.isPullingDown" class="text">
          <i class="cubeic-right"></i>
        </div>-->
      </cube-scroll>
    </div>
    <!-- <div class="scroll-list-wrap1">
      <cube-scroll
        ref="scroll"
        :data="itemms"
        @pulling-down="onPullingDown"
        @pulling-up="onPullingUp"
        direction:"horizontal"
      ></cube-scroll>
    </div>-->
  </div>
</template>

<script>
import $ from "jquery";
export default {
  name: "app",
  computed: {
    options() {
      return {
        pullDownRefresh: this.pullDownRefreshObj,
        pullUpLoad: this.pullUpLoadObj,
        scrollbar: true
      };
    }
  },
  data() {
    return {
      column1: [
        { title: "é”‹èŠ’åˆéœ²å°‘å¹´å¿—1", id: "é”‹èŠ’åˆéœ²å°‘å¹´å¿—1" },
        { title: "å‚²éª¨é“®é“®å°‘å¹´æ°”2", id: "å‚²éª¨é“®é“®å°‘å¹´æ°”2" },
        { title: "è¯†æ˜æ™ºå®¡ç¨³å¤§å±€3", id: "è¯†æ˜æ™ºå®¡ç¨³å¤§å±€3" },
        { title: "æ–¡æ—‹è°‹ç•¥æŠ¤é•¿å®‰4", id: "æ–¡æ—‹è°‹ç•¥æŠ¤é•¿å®‰4" },
        { title: "å°‘å¹´åå£«æ„æ°”é£å‘5", id: "å°‘å¹´åå£«æ„æ°”é£å‘5" },
        { title: "å¸ä¸å¿ƒä¸­è‡ªæœ‰ä¹¾å¤6", id: "å¸ä¸å¿ƒä¸­è‡ªæœ‰ä¹¾å¤6" },
        { title: "å¤©æ‰ä¹‹ç›¸å§‹æ‚Ÿäºå¿ƒ7", id: "å¤©æ‰ä¹‹ç›¸å§‹æ‚Ÿäºå¿ƒ7" },
        { title: "å°‘å¹´ä¹‹æ°”æµ‘ç„¶å¤©æˆ8", id: "å°‘å¹´ä¹‹æ°”æµ‘ç„¶å¤©æˆ8" },
        { title: "è¡Œäºç«¹å½±æ–‘é©³é—´9", id: "è¡Œäºç«¹å½±æ–‘é©³é—´9" },
        { title: "éšäºè½»çº±è–„é›¾é‡Œ10", id: "éšäºè½»çº±è–„é›¾é‡Œ10" },
        { title: "è‚è‚ ç…¦è‹¥æ˜¥é£11", id: "è‚è‚ ç…¦è‹¥æ˜¥é£11" },
        { title: "æ°”éª¨æ¸…å¦‚ç§‹æ°´12", id: "æ°”éª¨æ¸…å¦‚ç§‹æ°´12" }
      ],
      items: [
        "ğŸ˜€ ğŸ˜ ğŸ˜‚ ğŸ¤£ ğŸ˜ƒ ğŸ˜„ ",
        "ğŸ™‚ ğŸ¤— ğŸ¤© ğŸ¤” ğŸ¤¨ ğŸ˜ ",
        "ğŸ‘†ğŸ» scroll up/down ğŸ‘‡ğŸ» ",
        "ğŸ˜” ğŸ˜• ğŸ™ƒ ğŸ¤‘ ğŸ˜² â˜¹ï¸ ",
        "ğŸ£ ğŸ£ ğŸ£ ğŸ£ ğŸ£ ğŸ£ ",
        "ğŸ‘†ğŸ» scroll up/down ğŸ‘‡ğŸ» ",
        "ğŸ¥ ğŸ¥ ğŸ¥ ğŸ¥ ğŸ¥ ğŸ¥ ",
        "ğŸ¤“ ğŸ¤“ ğŸ¤“ ğŸ¤“ ğŸ¤“ ğŸ¤“ ",
        "ğŸ‘†ğŸ» scroll up/down ğŸ‘‡ğŸ» ",
        "ğŸ¦” ğŸ¦” ğŸ¦” ğŸ¦” ğŸ¦” ğŸ¦” ",
        "ğŸ™ˆ ğŸ™ˆ ğŸ™ˆ ğŸ™ˆ ğŸ™ˆ ğŸ™ˆ ",
        "ğŸ‘†ğŸ» scroll up/down ğŸ‘‡ğŸ» ",
        "ğŸš– ğŸš– ğŸš– ğŸš– ğŸš– ğŸš– ",
        "âœŒğŸ» âœŒğŸ» âœŒğŸ» âœŒğŸ» âœŒğŸ» âœŒğŸ» "
      ],
      itemms: [
        {
          id: "123",
          content:
            '<div class="markdown-text"><p><a href="/user/liveinjs">@liveinjs</a>  ä¸åŒæ„ä½ çš„è¯´æ³•ã€‚å¯¹é¡¹ç›®ä½œè€…è‡ªå·±ï¼Œæ˜¯ä¸€ä¸ªæ•´ç†è‡ªèº«æ‰€å­¦çš„è¿‡ç¨‹ï¼Œèƒ½å¤ŸæŸ¥æ¼è¡¥ç¼ºï¼Œå¢å¼ºç†è§£ã€‚å¯¹äºè¯»è€…ï¼Œä¸€æ˜¯step by  stepçš„æ•™ç¨‹æœ‰åŠ©äºå‡å°‘å…¥é—¨çš„æŒ«æŠ˜æ„Ÿï¼ŒäºŒæ˜¯ä½œä¸ºä¾‹ç¨‹å¯ä»¥åœ¨è‡ªå·±çš„é¡¹ç›®é‡Œå¤ç”¨ï¼Œä¸‰æ˜¯å­¦ä¹ æ€è·¯å’Œä¸€äº›æ¨¡å—çš„ç”¨æ³•ã€‚åŒæ—¶ä½œä¸ºå…¬å¼€é¡¹ç›®ï¼Œå¯ä»¥ä¼—åŒ…å»ºè®¾ã€å¯ä»¥ä¸æ–­æ”¹è¿›ã€‚è¿™ç§æ¨¡å¼å¯ä»¥è¯´æ˜¯ä¸€çŸ³å¤šé¸Ÿï¼Œå¿…å°†å¤§è¡Œå…¶é“ï¼Œå–ä»£ç°æœ‰çš„è®¡ç®—æœºç±»ä¹¦ç±ã€‚ <a href="/user/alsotang">@alsotang</a>  åŠ æ²¹~</p>\n</div><div class="markdown-text"><p>å—¯ï¼Œåˆšæ‰ç”¨iconvçš„æ—¶å€™ï¼Œæ²¡æ³¨æ„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ä¸ªbufferï¼Œæˆ‘ä¹‹å‰ç”¨çš„æ˜¯å­—ç¬¦ä¸²ï¼Œæ€ªä¸å¾—ä¸€ç›´ä¸æˆåŠŸï¼Œåæ¥æ”¹æˆç”¨bufferå°±å¥½äº†</p>\n</div><div class="markdown-text"><p>GitHub repo åœ°å€ï¼š<a href="https://github.com/alsotang/node-lessons">https://github.com/alsotang/node-lessons</a></p>\n<p>å¦‚æœå¤§å®¶è®¤ä¸ºæ¼äº†å“ªäº›åˆå­¦è€…åº”ä¼šçš„å†…å®¹ï¼Œå¯ä»¥åœ¨æ­¤ç•™è¨€ï¼Œæˆ–è€…å¼€ä¸ª issue ç»™æˆ‘ï¼ˆ!!æ¨èï¼‰ã€‚</p>\n<hr>\n<h1>ã€ŠNode.js åŒ…æ•™ä¸åŒ…ä¼šã€‹ â€“ by alsotang</h1>\n<h1>ä¸ºä½•å†™ä½œæ­¤è¯¾ç¨‹</h1>\n<p>åœ¨ CNode(<a href="https://cnodejs.org/">https://cnodejs.org/</a>) æ··äº†é‚£ä¹ˆä¹…ï¼Œè§£ç­”äº†ä¸å°‘ Node.js åˆå­¦è€…ä»¬çš„é—®é¢˜ã€‚å›å¤´æƒ³æƒ³ï¼Œé‚£äº›é—®é¢˜æ‰€éœ€è¦çš„æ€è·¯éƒ½ä¸éš¾ï¼Œä½†å¤§éƒ¨åˆ†äººç”±äºç»ƒæ‰‹æœºä¼šå°‘ï¼Œæ‰€ä»¥åœ¨é‡åˆ°é—®é¢˜çš„æ—¶å€™å¾ˆæ— æªã€‚å›½å†…å”¯ä¸€ä¸€æœ¬æ’çš„ä¸Šå·çš„ Node.js ä¹¦æ˜¯ @æœ´çµ(<a href="https://github.com/JacksonTian">https://github.com/JacksonTian</a>) çš„ ã€Šæ·±å…¥æµ…å‡ºNode.jsã€‹(<a href="http://book.douban.com/subject/25768396/">http://book.douban.com/subject/25768396/</a> )ï¼Œä½†è¿™æœ¬ä¹¦ç¦»å®æˆ˜è¿˜æ˜¯æ¯”è¾ƒè¿œçš„ã€‚</p>\n<p>è¿™ä¸ªè¯¾ç¨‹æ˜¯å¸Œæœ›æä¾›æ›´å¤šçš„ Node.js å®æˆ˜æœºä¼šï¼Œé€šè¿‡æ¯ä¸€èŠ‚ç²¾å¿ƒå®‰æ’çš„è¯¾ç¨‹ç›®æ ‡ï¼Œè®© Node.js çš„åˆå­¦è€…ä»¬å¯ä»¥å¾ªåºæ¸è¿›åœ°ï¼Œæœ‰ç›®çš„æœ‰æŒ‘æˆ˜åœ°å¼€å±• Node.js çš„å­¦ä¹ ã€‚</p>\n<p>æ›´å¤š Node.js å…¥é—¨èµ„æ–™è¯·å‰å¾€ï¼š<a href="https://cnodejs.org/getstart">https://cnodejs.org/getstart</a></p>\n<h1>è¯¾ç¨‹åˆ—è¡¨</h1>\n<ul>\n<li>Lesson 0: <a href="https://github.com/alsotang/node-lessons/tree/master/lesson0">ã€Šæ­å»º Node.js å¼€å‘ç¯å¢ƒã€‹</a></li>\n<li>Lesson 1: <a href="https://github.com/alsotang/node-lessons/tree/master/lesson1">ã€Šä¸€ä¸ªæœ€ç®€å•çš„ express åº”ç”¨ã€‹</a></li>\n<li>Lesson 2: <a href="https://github.com/alsotang/node-lessons/tree/master/lesson2">ã€Šå­¦ä¹ ä½¿ç”¨å¤–éƒ¨æ¨¡å—ã€‹</a></li>\n<li>Lesson 3: <a href="https://github.com/alsotang/node-lessons/tree/master/lesson3">ã€Šä½¿ç”¨ superagent ä¸ cheerio å®Œæˆç®€å•çˆ¬è™«ã€‹</a></li>\n<li>Lesson 4: <a href="https://github.com/alsotang/node-lessons/tree/master/lesson4">ã€Šä½¿ç”¨ eventproxy æ§åˆ¶å¹¶å‘ã€‹</a></li>\n<li>Lesson 5: <a href="https://github.com/alsotang/node-lessons/tree/master/lesson5">ã€Šä½¿ç”¨ async æ§åˆ¶å¹¶å‘ã€‹</a></li>\n<li>Lesson 6: <a href="https://github.com/alsotang/node-lessons/tree/master/lesson6">ã€Šæµ‹è¯•ç”¨ä¾‹ï¼šmochaï¼Œshouldï¼Œistanbulã€‹</a></li>\n<li>Lesson 7: ã€Šæµ‹è¯•ç”¨ä¾‹ï¼šsupertestã€‹</li>\n<li>Lesson 8: ã€ŠMongodb ä¸ Mongoose çš„ä½¿ç”¨ã€‹</li>\n<li>Lesson 9: ã€Šä¸€ä¸ªç®€å•çš„ blogã€‹</li>\n</ul>\n<h1>License</h1>\n<p>MIT</p>\n</div>'
        }
      ]
    };
  },
  methods: {
    showPicker() {
      if (!this.picker) {
        this.picker = this.$createPicker({
          title: "Picker",
          data: [this.column1],
          alias: {
            value: "id",
            text: "title"
          },
          onSelect: this.selectHandle,
          onCancel: this.cancelHandle
        });
      }

      this.picker.show();
    },
    selectHandle(selectedVal, selectedIndex, selectedText) {
      this.$createDialog({
        type: "warn",

        content: `Selected Item: <br/> - value: ${selectedVal} <br/> - index: ${selectedIndex.join(
          " "
        )} <br/> - text: ${selectedText.join(" ")}`,
        icon: "cubeic-alert"
      }).show();
      document.querySelector("p").innerHTML = selectedText;
    },
    cancelHandle() {
      this.$createToast({
        type: "error",
        txt: "Picker canceled",
        time: 500
      }).show();
    },
    onPullingDown() {
      setTimeout(() => {
        this.items = [...this.items].reverse();
      }, 1000);

      // console.log("111");
      // this.$refs.scroll.forceUpdate();
      // console.log(this.$refs.scroll);
    },
    onPullingUp() {
      // æ¨¡æ‹Ÿæ›´æ–°æ•°æ®
      setTimeout(() => {
        if (Math.random() > 0.5) {
          // å¦‚æœæœ‰æ–°æ•°æ®
          let newPage = _foods.slice(0, 5);
          this.items = this.items.concat(newPage);
        } else {
          // å¦‚æœæ²¡æœ‰æ–°æ•°æ®
          this.$refs.scroll.forceUpdate();
        }
      }, 1000);
    },
    onPullingUp() {
      setTimeout(() => {
        this.items.push(
          "ğŸ‘†ğŸ» scroll up/down ğŸ‘‡ğŸ» ",
          "ğŸ˜” ğŸ˜• ğŸ™ƒ ğŸ¤‘ ğŸ˜² â˜¹ï¸ ",
          "ğŸ£ ğŸ£ ğŸ£ ğŸ£ ğŸ£ ğŸ£ ",
          "ğŸ‘†ğŸ» scroll up/down ğŸ‘‡ğŸ» ",
          "ğŸ¥ ğŸ¥ ğŸ¥ ğŸ¥ ğŸ¥ ğŸ¥ ",
          "ğŸ¤“ ğŸ¤“ ğŸ¤“ ğŸ¤“ ğŸ¤“ ğŸ¤“ ",
          "ğŸ‘†ğŸ» scroll up/down ğŸ‘‡ğŸ» "
        );
      }, 1000);
    },
    scrollTo() {
      this.$refs.scroll.scrollTo(
        0,
        this.scrollToY,
        this.scrollToTime,
        ease[this.scrollToEasing]
      );
    }
  }
};
</script>

<style>
.scroll-list-wrap {
  width: 100%;
  height: 500px;
}
ul {
  list-style: inside;
}
.list {
  padding: 20px 0;
}
</style>
